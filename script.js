function showDetails(e){document.querySelectorAll(".slider-card").forEach((e=>{e.style.display="none"}));document.getElementById(`card-${e}`).style.display="block";document.getElementById(`card-${e}-bis`).style.display="block"}const overlay=document.getElementById("overlay"),modals={account:document.getElementById("accountModal"),choose:document.getElementById("chooseModal"),login:document.getElementById("loginModal"),register:document.getElementById("registerModal"),overlay:document.getElementById("overlay")};function toggleModal(){overlay.classList.toggle("show"),Object.values(modals).forEach((e=>e?.classList.remove("show")))}function showLogin(){toggleModal(),modals.login.classList.add("show"),modals.overlay.classList.add("show")}function showRegister(){toggleModal(),modals.register.classList.add("show"),modals.overlay.classList.add("show")}function showAccount(){toggleModal(),modals.account.classList.add("show"),modals.overlay.classList.add("show")}function showChoose(){toggleModal(),modals.choose.classList.add("show"),modals.overlay.classList.add("show")}function closeAll(){overlay.classList.remove("show"),Object.values(modals).forEach((e=>e?.classList.remove("show")))}function toggleEdit(){const e=document.getElementById("editCard");e&&(e.style.display="none"===e.style.display?"block":"none")}async function handleLogin(e){e.preventDefault();const o=document.getElementById("login-email").value,t=document.getElementById("login-mdp").value;try{if(!(await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email_utilisateur:o,mdp_utilisateur:t})})).ok)return void alert("Email ou mot de passe incorrect");location.reload()}catch(e){console.error("Erreur login:",e),alert("Erreur de connexion")}}async function handleRegister(e){e.preventDefault();const o=document.getElementById("register-prenom").value,t=document.getElementById("register-nom").value,l=document.getElementById("register-email").value,a=document.getElementById("register-mdp").value;try{if(!(await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prenom_utilisateur:o,nom_utilisateur:t,email_utilisateur:l,mdp_utilisateur:a})})).ok)return void alert("Erreur lors de l'inscription");location.reload()}catch(e){console.error("Erreur inscription:",e),alert("Erreur d'inscription")}}async function modify(){const e=document.getElementById("modify-prenom").value,o=document.getElementById("modify-nom").value,t=document.getElementById("modify-email").value,l=document.getElementById("modify-mdp").value;try{if(!(await fetch("/api/utilisateur",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({prenom_utilisateur:e,nom_utilisateur:o,email_utilisateur:t,mdp_utilisateur:l})})).ok)return void alert("Erreur lors de la modification");location.reload()}catch(e){console.error("Erreur modification:",e),alert("Erreur lors de la modification")}}async function logout(){try{if(!(await fetch("/api/auth/logout",{method:"POST"})).ok)throw new Error("Erreur lors de la déconnexion");location.reload()}catch(e){console.error("Erreur logout:",e),alert("Erreur lors de la déconnexion")}}